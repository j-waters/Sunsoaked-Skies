export function generateRoomBackground(d,a){let g=document.createElement("canvas"),b=a.roomSizeMargin*d.width-a.roomMargin,f=a.roomSizeMargin*d.height-a.roomMargin;g.width=b,g.height=f;let c=g.getContext("2d");c.lineWidth=a.strokeThickness,c.lineJoin="bevel",c.strokeStyle="#6b4a31",c.fillStyle="#ecb07f",c.rect(0,0,b,f),d.inside&&c.fill(),c.stroke();let j=k(d,b,f);c.drawImage(j,0,0),c.fillStyle="black";const h=a.strokeThickness/2;return d.neighbours.forEach(e=>{switch(e.direction){case"UP":c.fillRect(e.thisPosition.x*a.roomSizeMargin,0,a.roomSize,h);break;case"DOWN":c.fillRect(e.thisPosition.x*a.roomSizeMargin,f-h,a.roomSize,h);break;case"LEFT":c.fillRect(0,e.thisPosition.y*a.roomSizeMargin,h,a.roomSize);break;case"RIGHT":c.fillRect(b-h,e.thisPosition.y*a.roomSizeMargin,h,a.roomSize);break}}),g}function k(d,a,g){let b=document.createElement("canvas");b.width=a,b.height=g;if(d.name==="")return b;let f=b.getContext("2d");return f.textAlign="center",f.textBaseline="top",f.fillStyle="rgba(0,0,0,0.5)",l(f,d.name,"Artifika",a-10,g-10,a/2,10),b}function l(d,a,g,b,f,c,j){let h=1,e=5;for(;;){d.font=`${h}px ${g}`;let i=d.measureText(a);h+=e,(i.width<b&&e<0||i.width>b&&e>0)&&(e=-e/2);if(b-i.width<.3&&b-i.width>0){d.fillText(a,c,j);return}}}

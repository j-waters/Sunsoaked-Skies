export function generateRoomBackground(c,e){const r=document.createElement("canvas"),i=e.roomSizeMargin*c.width-e.roomMargin,l=e.roomSizeMargin*c.height-e.roomMargin;r.width=i,r.height=l;const t=r.getContext("2d");t.lineWidth=e.strokeThickness,t.lineJoin="bevel",t.strokeStyle="#6b4a31",t.fillStyle="#ecb07f",t.rect(0,0,i,l),c.inside&&t.fill(),t.stroke();const f=h(c,i,l);t.drawImage(f,0,0),t.fillStyle="black";const s=e.strokeThickness/2;return c.neighbours.forEach(o=>{switch(o.direction){case"UP":t.fillRect(o.thisPosition.x*e.roomSizeMargin,0,e.roomSize,s);break;case"DOWN":t.fillRect(o.thisPosition.x*e.roomSizeMargin,l-s,e.roomSize,s);break;case"LEFT":t.fillRect(0,o.thisPosition.y*e.roomSizeMargin,s,e.roomSize);break;case"RIGHT":t.fillRect(i-s,o.thisPosition.y*e.roomSizeMargin,s,e.roomSize);break}}),r}function h(c,e,r){const i=document.createElement("canvas");if(i.width=e,i.height=r,c.name==="")return i;const l=i.getContext("2d");return l.textAlign="center",l.textBaseline="top",l.fillStyle="rgba(0,0,0,0.5)",m(l,c.name,"Artifika",e-10,r-10,e/2,10),i}function m(c,e,r,i,l,t,f){let s=1,o=5;for(;;){c.font=`${s}px ${r}`;const a=c.measureText(e);if(s+=o,(a.width<i&&o<0||a.width>i&&o>0)&&(o=-o/2),i-a.width<.3&&i-a.width>0){c.fillText(e,t,f);return}}}

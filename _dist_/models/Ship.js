import{generateGrid as e,generateHullGraphic as f,generateTopDownShipGraphic as g}from"../generation/generateShip.js";var h=Phaser.Math.Vector2;import{POSITIVE_ZERO as i}from"../sprites/map/MapShipSprite.js";var o=Phaser.Scene;export default class j{constructor(a){this.turningModifier=100,this.speed=5,this.acceleration=.01,this.rootRoom=a,this.velocity=new h(0,i)}get decelerationDistance(){return this.velocity.length()/(2*this.acceleration)}generateTexture(a,b){if(a.textures.exists("ship_hull"))return a.textures.get("ship_hull");let d=f(this,b);return a.textures.addCanvas("ship_hull",d)}generateTopDownTexture(a){if(a.textures.exists("ship_top_down"))return a.textures.get("ship_top_down");let b=g(this);return a.textures.addCanvas("ship_top_down",b)}static builder(){return new k()}get roomGrid(){return e(this.rootRoom)}get people(){return this.rooms.flatMap(a=>a.people)}get rooms(){let a=[];return this.roomGrid.forEach((b,d)=>{b.forEach((c,l)=>{c&&!a.includes(c)&&(c.setGridPosition(l,d),a.push(c))})}),a}}class k{createRootRoom(a){return this.rootRoom=a,this.rootRoom}build(){let a=new j(this.rootRoom);return a.rootRoom.setShip(a),a}}

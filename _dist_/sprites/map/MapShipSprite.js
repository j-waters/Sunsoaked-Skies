var d=Phaser.Curves.Curve;export const POSITIVE_ZERO=1e-4;export default class e extends Phaser.GameObjects.Sprite{constructor(a,b){super(a,0,0,b.generateTopDownTexture(a));this.ship=b,this.parent=a;let c=a.mapSize/512;this.setPosition(this.ship.position.x*c,this.ship.position.y*c),this.progress=0}update(){if(this.targetCurve){let a=this.progress>1-this.targetCurve.getTFromDistance(this.ship.decelerationDistance);this.accelerate(a);let b=this.targetCurve.getPointAt(this.progress);this.ship.velocity.setAngle(this.targetCurve.getTangentAt(this.progress).angle()),this.setRotation(this.ship.velocity.angle()-Math.PI/2),this.setPosition(b.x,b.y);let c=this.targetCurve.getTFromDistance(this.ship.velocity.length());this.progress+=c,this.progress>=1&&(this.targetCurve=null)}else this.accelerate(!0),this.ship.velocity.length()>POSITIVE_ZERO&&(this.x+=this.ship.velocity.x,this.y+=this.ship.velocity.y)}accelerate(a=!1){if(!a&&this.ship.velocity.length()<this.ship.speed)this.ship.velocity.setLength(this.ship.velocity.length()+this.ship.acceleration);else if(a&&this.ship.velocity.length()>.001){let b=this.ship.velocity.length()-this.ship.acceleration;b<POSITIVE_ZERO?this.ship.velocity.setLength(POSITIVE_ZERO):this.ship.velocity.setLength(b)}this.ship.velocity.length()>this.ship.speed&&this.ship.velocity.setLength(this.ship.speed)}}

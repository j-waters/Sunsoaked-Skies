import{generateRoomBackground as f}from"../../generation/generateRoom.js";import g from"../../models/Room.js";var h=Phaser.GameObjects.Sprite;import i from"../../../web_modules/dat.gui.js";var j=Phaser.Math.Vector2;export default class o extends h{constructor(a,b,c){let d=a.textures.addCanvas(null,f(b,c),!0);super(a,0,0,d);this.setInteractive({useHandCursor:!0}),this.parent=a,this.room=b,this.generationSettings=c,this.on(Phaser.Input.Events.POINTER_DOWN,(e,p,q,k)=>{this.parent.select(this),k.stopPropagation(),console.log("Clicked:",this)}),this.debugGui=new i.GUI(),this.debugGui.hide()}get selected(){return this.parent.selected===this}select(){this.highlightBox.setStrokeStyle(this.highlightBox.lineWidth,16755200),this.highlightBox.setVisible(!0),this.debugGui.show()}deselect(){this.highlightBox.setVisible(!1),this.debugGui.hide()}setupHover(){let a=this.generationSettings.strokeThickness/2;this.highlightBox=this.parent.add.rectangle(this.x+a/2,this.y+a/2,this.width-a,this.height-a),this.highlightBox.setStrokeStyle(a,16776960),this.highlightBox.setVisible(!1),this.highlightBox.setOrigin(0,0),this.on(Phaser.Input.Events.POINTER_OVER,b=>{this.highlightBox.setStrokeStyle(a,16776960),this.highlightBox.setVisible(!0)}),this.on(Phaser.Input.Events.POINTER_OUT,b=>{this.selected?this.highlightBox.setStrokeStyle(this.highlightBox.lineWidth,16755200):this.highlightBox.setVisible(!1)})}setPosition(a,b,c,d){return super.setPosition(a,b,c+1,d),this.highlightBox&&this.highlightBox.setPosition(a,b,c,d),this}personWorldPosition(a){let b=g.possiblePositions(this.room.width),c=b*2,d=this.x+this.width/c*(a.x*2+1),e=this.y+(a.y+1)*(this.height/this.room.height);return new j(d,e)}}

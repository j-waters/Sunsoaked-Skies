import{generateRoomBackground as r}from"../../generation/generateRoom.js";import n from"../../models/Room.js";import g from"../../../web_modules/dat.gui.js";var l=Phaser.GameObjects.Sprite,u=Phaser.Math.Vector2;export default class a extends l{constructor(t,i,e){const s=t.textures.addCanvas(null,r(i,e),!0);super(t,0,0,s);this.setInteractive({useHandCursor:!0}),this.parent=t,this.room=i,this.generationSettings=e,this.on(Phaser.Input.Events.POINTER_DOWN,(h,d,c,o)=>{this.parent.select(this),o.stopPropagation(),console.log("Clicked:",this)}),this.debugGui=new g.GUI(),this.debugGui.hide()}get selected(){return this.parent.selected===this}select(){this.highlightBox.setStrokeStyle(this.highlightBox.lineWidth,16755200),this.highlightBox.setVisible(!0),this.debugGui.show()}deselect(){this.highlightBox.setVisible(!1),this.debugGui.hide()}setupHover(){const t=this.generationSettings.strokeThickness/2;this.highlightBox=this.parent.add.rectangle(this.x+t/2,this.y+t/2,this.width-t,this.height-t),this.highlightBox.setStrokeStyle(t,16776960),this.highlightBox.setVisible(!1),this.highlightBox.setOrigin(0,0),this.on(Phaser.Input.Events.POINTER_OVER,i=>{this.highlightBox.setStrokeStyle(t,16776960),this.highlightBox.setVisible(!0)}),this.on(Phaser.Input.Events.POINTER_OUT,i=>{this.selected?this.highlightBox.setStrokeStyle(this.highlightBox.lineWidth,16755200):this.highlightBox.setVisible(!1)})}setPosition(t,i,e,s){return super.setPosition(t,i,e+1,s),this.highlightBox&&this.highlightBox.setPosition(t,i,e,s),this}personWorldPosition(t){const i=n.possiblePositions(this.room.width),e=i*2,s=this.x+this.width/e*(t.x*2+1),h=this.y+(t.y+1)*(this.height/this.room.height);return new u(s,h)}}
